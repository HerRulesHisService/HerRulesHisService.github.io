<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDSM Personality Test (Mini)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #8b5cf6;
            --primary-dark: #7c3aed;
            --secondary-color: #f59e0b;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
        }

        .screen {
            display: none;
            padding: 40px;
        }

        .screen.active {
            display: block;
        }

        .intro-content {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .intro-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 16px;
            color: var(--primary-color);
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 16px;
        }

        p {
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .disclaimer {
            background-color: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 16px;
            margin: 30px 0;
            text-align: left;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-primary {
            background-color: var(--primary-color);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 5%;
            transition: width 0.3s ease;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 30px 0;
        }

        .option-btn {
            padding: 12px;
            background-color: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .option-btn:hover {
            border-color: var(--primary-color);
        }

        .option-btn.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .nav-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .result-category {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f8fafc;
            border-left: 4px solid var(--primary-color);
        }

        .result-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .result-name {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .result-percentage {
            font-weight: 700;
            color: var(--primary-color);
        }

        .result-bar {
            height: 10px;
            background-color: var(--border-color);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .result-fill {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 5px;
        }

        .result-description {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .personal-insights {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .insight-box {
            padding: 20px;
            border-radius: 8px;
            background-color: #f8fafc;
            border: 1px solid var(--border-color);
        }

        .insight-title {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .remember-section {
            background-color: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }

        .remember-title {
            font-weight: 700;
            margin-bottom: 10px;
            color: #d97706;
        }

        .results-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .input-group {
            margin: 20px 0;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
        }

        .result-image-container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            margin: 0 auto;
        }

        .result-image-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .result-image-footer {
            text-align: center;
            margin-top: 20px;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .personal-insights {
                grid-template-columns: 1fr;
            }
            
            .results-actions {
                flex-direction: column;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Introduction Screen -->
        <div id="intro-screen" class="screen active">
            <div class="intro-content">
                <div class="intro-icon">üîÆ</div>
                <h1>BDSM Personality Test (Mini)</h1>
                <p>Discover your unique BDSM preferences and tendencies through our concise 20-question assessment. Answer honestly to get meaningful insights about your personality.</p>
                
                <div class="disclaimer">
                    <strong>Privacy First:</strong> This test runs entirely in your browser. Your answers are never stored or sent to any server. Results are for self-discovery and educational purposes only.
                </div>
                
                <button id="start-btn" class="btn btn-primary">
                    Begin Test ‚Üí
                </button>
            </div>
        </div>

        <!-- Test Screen -->
        <div id="test-screen" class="screen">
            <div class="progress-container">
                <div class="progress-info">
                    <span>Question Progress</span>
                    <span id="question-counter">1/20</span>
                </div>
                <div class="progress-bar">
                    <div id="progress" class="progress"></div>
                </div>
            </div>

            <div id="question-container">
                <h2 id="question-text">Loading question...</h2>
                
                <div class="options-grid">
                    <button class="option-btn" data-value="-2">
                        Strongly Disagree
                    </button>
                    <button class="option-btn" data-value="-1">
                        Disagree
                    </button>
                    <button class="option-btn" data-value="0">
                        Neutral
                    </button>
                    <button class="option-btn" data-value="1">
                        Agree
                    </button>
                    <button class="option-btn" data-value="2">
                        Strongly Agree
                    </button>
                </div>
            </div>

            <div class="navigation">
                <button id="prev-btn" class="btn nav-btn">
                    ‚Üê Previous
                </button>
                <button id="next-btn" class="btn btn-primary">
                    Next Question ‚Üí
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-header">
                <h1>Your BDSM Personality Profile</h1>
                <p>Based on your responses, here are your detailed results</p>
            </div>

            <div id="results-container" class="results-content">
                <!-- Results will be dynamically inserted here -->
            </div>

            <div class="results-actions">
                <button id="retake-btn" class="btn btn-outline">
                    üîÑ Retake Test
                </button>
                <button id="share-image-btn" class="btn btn-primary">
                    üì§ Share as Image
                </button>
                <button id="share-text-btn" class="btn btn-secondary">
                    üìù Share as Text
                </button>
            </div>
        </div>
    </div>

    <!-- Share Options Modal -->
    <div id="share-modal" class="modal">
        <div class="modal-content">
            <h2>Share Your Results</h2>
            <p>Would you like to include your name in the shared results?</p>
            <div class="modal-buttons">
                <button id="share-without-name" class="btn btn-outline">No, Share Anonymously</button>
                <button id="share-with-name" class="btn btn-primary">Yes, Include My Name</button>
            </div>
        </div>
    </div>

    <!-- Name Input Modal -->
    <div id="name-modal" class="modal">
        <div class="modal-content">
            <h2>Enter Your Name</h2>
            <div class="input-group">
                <input type="text" id="user-name" placeholder="Enter your name">
            </div>
            <div class="modal-buttons">
                <button id="cancel-name" class="btn btn-outline">Cancel</button>
                <button id="confirm-name" class="btn btn-primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Result Image Container (for capturing) -->
    <div id="result-image-container" class="result-image-container" style="display: none;">
        <h1 class="result-image-title">BDSM Personality Test (Mini)</h1>
        <div id="image-results-content">
            <!-- Results for image will be inserted here -->
        </div>
        <div class="result-image-footer">
            <p>Result provided by: HerRuleHisService</p>
        </div>
    </div>

    <script>
        // Questions data
        const questions = [
            "I enjoy taking control in intimate situations",
            "I find pleasure in surrendering control to someone I trust",
            "The idea of power exchange excites me",
            "I appreciate clear rules and structure in relationships",
            "Physical sensation play (like spanking) is appealing to me",
            "I enjoy psychological aspects of dominance and submission",
            "I feel fulfilled when serving someone else's needs",
            "Being cared for and guided makes me feel secure",
            "I like the idea of rituals and protocols in relationships",
            "I'm drawn to the aesthetic of BDSM culture",
            "Communication about boundaries is essential to me",
            "I find the concept of consensual non-consent intriguing",
            "I enjoy role-playing different power dynamics",
            "I'm curious about exploring my limits in a safe environment",
            "I appreciate when my partner takes initiative",
            "I feel a sense of freedom within agreed-upon constraints",
            "I'm interested in the spiritual aspects of BDSM",
            "I find beauty in vulnerability and trust",
            "I enjoy the process of negotiation before scenes",
            "Aftercare is an important part of any BDSM activity for me"
        ];

        // Categories for scoring
        const categories = {
            dominance: {
                name: "Dominant Tendencies",
                questions: [0, 2, 3, 8, 14],
                description: "Measures your inclination toward taking control and leadership in dynamics"
            },
            submission: {
                name: "Submissive Tendencies",
                questions: [1, 6, 7, 15, 17],
                description: "Assesses your comfort with surrendering control and following guidance"
            },
            sensualist: {
                name: "Sensualist",
                questions: [4, 9, 12, 16, 18],
                description: "Evaluates your appreciation for sensory experiences and aesthetic elements"
            },
            pragmatist: {
                name: "Pragmatist",
                questions: [5, 10, 11, 13, 19],
                description: "Measures your focus on communication, safety, and practical aspects"
            }
        };

        // Personal insights data
        const personalInsights = [
            {
                title: "Your Primary Role",
                description: "Based on your responses, you show stronger tendencies toward either dominance or submission, which might indicate your preferred role in dynamics."
            },
            {
                title: "Communication Style",
                description: "Your answers suggest how you approach negotiation and boundary setting, which is crucial for safe and consensual play."
            },
            {
                title: "Sensory Preferences",
                description: "Your results indicate whether you're more drawn to physical sensations, psychological aspects, or a balance of both."
            },
            {
                title: "Relationship Dynamics",
                description: "This insight explores how you might integrate BDSM elements into relationships, whether as occasional play or lifestyle integration."
            }
        ];

        // Remember section content
        const rememberContent = [
            "BDSM is about consensual power exchange - communication and consent are fundamental",
            "Your results reflect tendencies, not fixed identities - people can enjoy different roles in different contexts",
            "Safety and aftercare are essential components of responsible BDSM practice",
            "These results are for self-discovery and educational purposes only"
        ];

        // DOM elements
        const introScreen = document.getElementById('intro-screen');
        const testScreen = document.getElementById('test-screen');
        const resultsScreen = document.getElementById('results-screen');
        const startBtn = document.getElementById('start-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const questionText = document.getElementById('question-text');
        const questionCounter = document.getElementById('question-counter');
        const progressBar = document.getElementById('progress');
        const optionBtns = document.querySelectorAll('.option-btn');
        const resultsContainer = document.getElementById('results-container');
        const retakeBtn = document.getElementById('retake-btn');
        const shareImageBtn = document.getElementById('share-image-btn');
        const shareTextBtn = document.getElementById('share-text-btn');
        const shareModal = document.getElementById('share-modal');
        const nameModal = document.getElementById('name-modal');
        const userNameInput = document.getElementById('user-name');
        const shareWithoutNameBtn = document.getElementById('share-without-name');
        const shareWithNameBtn = document.getElementById('share-with-name');
        const cancelNameBtn = document.getElementById('cancel-name');
        const confirmNameBtn = document.getElementById('confirm-name');
        const resultImageContainer = document.getElementById('result-image-container');
        const imageResultsContent = document.getElementById('image-results-content');

        // Test state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let shareMode = ''; // 'image' or 'text'

        // Initialize the test
        function initTest() {
            currentQuestion = 0;
            answers = new Array(questions.length).fill(null);
            updateQuestion();
            updateProgress();
        }

        // Update question display
        function updateQuestion() {
            questionText.textContent = questions[currentQuestion];
            questionCounter.textContent = `${currentQuestion + 1}/${questions.length}`;
            
            // Update option buttons
            optionBtns.forEach(btn => {
                btn.classList.remove('selected');
                if (parseInt(btn.dataset.value) === answers[currentQuestion]) {
                    btn.classList.add('selected');
                }
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.textContent = currentQuestion === questions.length - 1 ? 'See Results' : 'Next Question ‚Üí';
        }

        // Update progress bar
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Calculate results
        function calculateResults() {
            const scores = {};
            
            // Initialize category scores
            for (const category in categories) {
                scores[category] = 0;
            }
            
            // Calculate scores for each category
            for (const category in categories) {
                const categoryData = categories[category];
                let total = 0;
                
                categoryData.questions.forEach(qIndex => {
                    if (answers[qIndex] !== null) {
                        // Convert answer to positive value for scoring
                        total += answers[qIndex] + 2;
                    }
                });
                
                // Calculate percentage (max possible is 5 questions * 4 points = 20)
                scores[category] = Math.round((total / 20) * 100);
            }
            
            return scores;
        }

        // Display results
        function displayResults() {
            const scores = calculateResults();
            
            let resultsHTML = '';
            
            // Add category results
            for (const category in categories) {
                const categoryData = categories[category];
                const score = scores[category];
                
                resultsHTML += `
                    <div class="result-category">
                        <div class="result-title">
                            <div class="result-name">${categoryData.name}</div>
                            <div class="result-percentage">${score}%</div>
                        </div>
                        <div class="result-bar">
                            <div class="result-fill" style="width: ${score}%"></div>
                        </div>
                        <div class="result-description">${categoryData.description}</div>
                    </div>
                `;
            }
            
            // Add personal insights
            resultsHTML += `<h2 style="margin-top: 40px;">Personal Insights</h2>`;
            resultsHTML += `<div class="personal-insights">`;
            
            personalInsights.forEach(insight => {
                resultsHTML += `
                    <div class="insight-box">
                        <div class="insight-title">${insight.title}</div>
                        <div class="result-description">${insight.description}</div>
                    </div>
                `;
            });
            
            resultsHTML += `</div>`;
            
            // Add remember section
            resultsHTML += `<div class="remember-section">`;
            resultsHTML += `<div class="remember-title">Important to Remember</div>`;
            resultsHTML += `<ul style="padding-left: 20px;">`;
            
            rememberContent.forEach(item => {
                resultsHTML += `<li style="margin-bottom: 8px;">${item}</li>`;
            });
            
            resultsHTML += `</ul>`;
            resultsHTML += `</div>`;
            
            resultsContainer.innerHTML = resultsHTML;
        }

        // Prepare results for image sharing
        function prepareResultsForImage(userName = '') {
            const scores = calculateResults();
            
            let imageHTML = '';
            
            // Add title with optional user name
            if (userName) {
                imageHTML += `<h2 style="text-align: center; margin-bottom: 20px;">Results for: ${userName}</h2>`;
            }
            
            // Add category results
            for (const category in categories) {
                const categoryData = categories[category];
                const score = scores[category];
                
                imageHTML += `
                    <div class="result-category">
                        <div class="result-title">
                            <div class="result-name">${categoryData.name}</div>
                            <div class="result-percentage">${score}%</div>
                        </div>
                        <div class="result-bar">
                            <div class="result-fill" style="width: ${score}%"></div>
                        </div>
                    </div>
                `;
            }
            
            // Add personal insights
            imageHTML += `<h2 style="margin-top: 30px; margin-bottom: 15px;">Personal Insights</h2>`;
            imageHTML += `<div class="personal-insights">`;
            
            personalInsights.forEach(insight => {
                imageHTML += `
                    <div class="insight-box">
                        <div class="insight-title">${insight.title}</div>
                        <div class="result-description">${insight.description}</div>
                    </div>
                `;
            });
            
            imageHTML += `</div>`;
            
            // Add remember section
            imageHTML += `<div class="remember-section">`;
            imageHTML += `<div class="remember-title">Important to Remember</div>`;
            imageHTML += `<ul style="padding-left: 20px;">`;
            
            rememberContent.forEach(item => {
                imageHTML += `<li style="margin-bottom: 8px;">${item}</li>`;
            });
            
            imageHTML += `</ul>`;
            imageHTML += `</div>`;
            
            imageResultsContent.innerHTML = imageHTML;
        }

        // Share as image
        function shareAsImage(userName = '') {
            prepareResultsForImage(userName);
            
            // Use html2canvas to capture the result image container
            html2canvas(resultImageContainer).then(canvas => {
                // Convert canvas to image data URL
                const imageDataURL = canvas.toDataURL('image/png');
                
                // Create a temporary link to download the image
                const link = document.createElement('a');
                link.download = `BDSM-Personality-Test-${userName ? userName : 'Anonymous'}.png`;
                link.href = imageDataURL;
                link.click();
            });
        }

        // Share as text
        function shareAsText(userName = '') {
            const scores = calculateResults();
            
            let textContent = `BDSM Personality Test (Mini) Results\n`;
            textContent += `================================\n\n`;
            
            if (userName) {
                textContent += `Results for: ${userName}\n\n`;
            }
            
            // Add category results
            textContent += `CATEGORY RESULTS:\n`;
            for (const category in categories) {
                const categoryData = categories[category];
                const score = scores[category];
                textContent += `${categoryData.name}: ${score}%\n`;
            }
            
            textContent += `\nPERSONAL INSIGHTS:\n`;
            personalInsights.forEach(insight => {
                textContent += `‚Ä¢ ${insight.title}: ${insight.description}\n`;
            });
            
            textContent += `\nIMPORTANT TO REMEMBER:\n`;
            rememberContent.forEach(item => {
                textContent += `‚Ä¢ ${item}\n`;
            });
            
            textContent += `\nResult provided by: HerRuleHisService`;
            
            // Create a temporary textarea to copy the text
            const textArea = document.createElement('textarea');
            textArea.value = textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            alert('Results copied to clipboard!');
        }

        // Event listeners
        startBtn.addEventListener('click', () => {
            introScreen.classList.remove('active');
            testScreen.classList.add('active');
            initTest();
        });

        optionBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const value = parseInt(btn.dataset.value);
                answers[currentQuestion] = value;
                
                // Update selected state
                optionBtns.forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
            });
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateQuestion();
                updateProgress();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (answers[currentQuestion] === null) {
                alert('Please select an answer before proceeding.');
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                updateQuestion();
                updateProgress();
            } else {
                // Show results
                testScreen.classList.remove('active');
                resultsScreen.classList.add('active');
                displayResults();
            }
        });

        retakeBtn.addEventListener('click', () => {
            resultsScreen.classList.remove('active');
            introScreen.classList.add('active');
        });

        shareImageBtn.addEventListener('click', () => {
            shareMode = 'image';
            shareModal.classList.add('active');
        });

        shareTextBtn.addEventListener('click', () => {
            shareMode = 'text';
            shareModal.classList.add('active');
        });

        shareWithoutNameBtn.addEventListener('click', () => {
            shareModal.classList.remove('active');
            
            if (shareMode === 'image') {
                shareAsImage();
            } else if (shareMode === 'text') {
                shareAsText();
            }
        });

        shareWithNameBtn.addEventListener('click', () => {
            shareModal.classList.remove('active');
            nameModal.classList.add('active');
            userNameInput.focus();
        });

        cancelNameBtn.addEventListener('click', () => {
            nameModal.classList.remove('active');
        });

        confirmNameBtn.addEventListener('click', () => {
            const userName = userNameInput.value.trim();
            nameModal.classList.remove('active');
            
            if (shareMode === 'image') {
                shareAsImage(userName);
            } else if (shareMode === 'text') {
                shareAsText(userName);
            }
            
            userNameInput.value = '';
        });

        // Allow Enter key to confirm name
        userNameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                confirmNameBtn.click();
            }
        });
    </script>
</body>
</html>
